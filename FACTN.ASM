;FACTORIAL_N

STACK		SEGMENT	PARA STACK
			DW		100H DUP(?)
STACK		ENDS

DATA		SEGMENT PARA
N			DW		4
RESULT		DW		?
DATA		ENDS

CODE		SEGMENT	PARA
			ASSUME	CS:CODE,DS:DATA,SS:STACK

MAIN		PROC	FAR
			MOV		AX,		DATA
			MOV		DS,		AX

			MOV		AX,		OFFSET RESULT
			PUSH	AX
			MOV		AX,		N
			PUSH	AX
			CALL	CALCULATE
			CALL	DISP_VALUE

			MOV		AX,		4C00H
			INT		21H
MAIN		ENDP

CALCULATE	PROC	NEAR
			PUSH	BP
			MOV		BP,		SP
			PUSH	DI
			PUSH	DX
			PUSH	BX
			MOV		BX,		[BP+4]
			MOV		DI,		[BP+6]
			CMP		BX,		0
			JNZ		CAL1	
			MOV		[DI],	1
			JMP		SHORT CAL2
CAL1:		PUSH	BX
			DEC		BX
			PUSH	DI
			PUSH	BX
			CALL	CALCULATE
			POP		BX
			MOV		AX,		[DI]
			MUL		BX
			MOV		[DI],	AX
CAL2:		POP		BX
			POP		DX
			POP		DI
			POP		BP
			RET		4
CALCULATE	ENDP

DISP_VALUE	PROC
			PUSH	DX
			PUSH	CX
			PUSH	BX
			PUSH	AX

			MOV		AX,		RESULT
			MOV		CX,		5
			MOV		BX,		10

DLP1:		XOR		DX,		DX
			DIV		BX
			PUSH	DX
			LOOP	DLP1

			MOV		BX,		0
			MOV		CX,		5
DLP2:		POP		DX
			CMP		DL,		0
			JNZ		DLP2_1
			CMP		BX,		0
			JZ		DLP2_2
DLP2_1:		MOV		BX,		1
			OR		DL,		30H
			MOV		AH,		2
			INT 	21H
DLP2_2:		LOOP	DLP2

			POP		AX
			POP		BX
			POP		CX
			POP		DX
			RET
DISP_VALUE	ENDP

CODE		ENDS
			END		MAIN